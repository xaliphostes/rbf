{"version":3,"file":"index-CcawaYqh.js","sources":["../../src/rbf_interpolator.ts","../../src/main.ts"],"sourcesContent":["// ==============================================================\r\n// Radial Basis Function (RBF) Interpolator\r\n// Implementation of scipy.interpolate.Rbf with thin_plate function\r\n// ==============================================================\r\n\r\n/**\r\n * RBF Interpolator parameters\r\n * @category Algorithms\r\n * @param func The radial basis function type (default: \"thin_plate\"). Possible values: \"thin_plate\", \"multiquadric\", \"inverse_multiquadric\", \"gaussian\", \"linear\", \"squared\", \"quintic\"\r\n * @param smooth The smoothing parameter (default: 0.01)\r\n * @param epsilon The shape parameter for some RBF functions (default: null, auto-computed)\r\n * @param trainPoints The training points as array of coordinate arrays: [[x1, y1, z1, ...], [x2, y2, z2, ...], ...]\r\n * @param trainValues The training values at each point: [v1, v2, v3, ...]\r\n * @param interpPoints The points where to interpolate: [[x1, y1, z1, ...], [x2, y2, z2, ...], ...]\r\n */\r\nexport type RbfParameters = {\r\n    func?: string;\r\n    smooth?: number;\r\n    epsilon?: number | null;\r\n    //\r\n    trainPoints: number[][];\r\n    trainValues: number[];\r\n    interpPoints: number[][];\r\n};\r\n\r\n/**\r\n * RBF Interpolaztion function\r\n * @param params The RBF parameters\r\n * @returns The interpolated values at interpPoints: [v1, v2, v3, ...]\r\n * @see RbfParameters\r\n * @example\r\n * ```typescript\r\n * import { rbf } from 'rbf_interpolator'\r\n *\r\n * const points = [[0,0], [1,0], [0,1], [1,1]]\r\n * const values = [0, 1, 1, 0]\r\n * const interpPoints = [[0.5,0.5], [0.25,0.75]]\r\n *\r\n * const interpolatedValues = rbf({\r\n *      func: 'thin_plate',\r\n *      smooth: 0.01,\r\n *      trainPoints: points,\r\n *      trainValues: values,\r\n *      interpPoints: interpPoints\r\n * })\r\n * console.log(interpolatedValues)\r\n * ```\r\n * @category Algorithms\r\n */\r\nexport function rbf({\r\n    func = \"gaussian\",\r\n    smooth = 0.01,\r\n    epsilon = null,\r\n    trainPoints,\r\n    trainValues,\r\n    interpPoints\r\n}: RbfParameters) {\r\n    const interpolator = new RbfInterpolator(trainPoints, trainValues, func, smooth, epsilon);\r\n    return interpolator.interpolate(interpPoints);\r\n}\r\n\r\n// Exported for the html demo\r\nexport class RbfInterpolator {\r\n    //private xi: number[][];\r\n    private di: number[];\r\n    private weights: number[];\r\n    private nodes: number[][];\r\n    private smooth: number;\r\n    private epsilon: number;\r\n    private norm: (x1: number[], x2: number[]) => number;\r\n\r\n    /**\r\n     * Initialize RBF interpolator\r\n     * @param points - Array of coordinate arrays [[x1, y1, z1, ...], [x2, y2, z2, ...], ...]\r\n     * @param values - Array of values at each point\r\n     * @param func - Radial basis function type (default: 'thin_plate')\r\n     * @param smooth - Smoothing parameter (default: 0)\r\n     * @param epsilon - Shape parameter for some RBF functions (default: null, auto-computed)\r\n     */\r\n    constructor(\r\n        points: number[][],\r\n        values: number[],\r\n        func: string = 'thin_plate',\r\n        smooth: number = 0,\r\n        epsilon: number | null = null\r\n    ) {\r\n        if (points.length !== values.length) {\r\n            throw new Error('Number of points must match number of values');\r\n        }\r\n\r\n        if (points.length === 0) {\r\n            throw new Error('At least one data point is required');\r\n        }\r\n\r\n        this.nodes = points.map(p => [...p]);\r\n        this.di = [...values];\r\n        this.smooth = smooth;\r\n\r\n        // Auto-compute epsilon if not provided\r\n        if (epsilon === null) {\r\n            this.epsilon = this.computeEpsilon(points);\r\n        } else {\r\n            this.epsilon = epsilon;\r\n        }\r\n\r\n        // Set the radial basis function\r\n        this.norm = this.getRbfFunction(func);\r\n\r\n        // Compute weights\r\n        this.weights = this.computeWeights();\r\n    }\r\n\r\n    /**\r\n     * Interpolate at new points\r\n     * @param points - Array of coordinate arrays to interpolate at\r\n     * @returns Array of interpolated values\r\n     */\r\n    interpolate(points: number[][]): number[] {\r\n        return points.map(point => this.interpolatePoint(point));\r\n    }\r\n\r\n    /**\r\n     * Interpolate at a single point\r\n     * @param point - Coordinate array [x, y, z, ...]\r\n     * @returns Interpolated value\r\n     */\r\n    interpolatePoint(point: number[]): number {\r\n        if (point.length !== this.nodes[0].length) {\r\n            throw new Error(`Point dimension (${point.length}) must match training data dimension (${this.nodes[0].length})`);\r\n        }\r\n\r\n        let result = 0;\r\n        for (let i = 0; i < this.nodes.length; i++) {\r\n            result += this.weights[i] * this.norm(point, this.nodes[i]);\r\n        }\r\n        return result;\r\n    }\r\n\r\n    // ------------------ private methods ------------------\r\n\r\n    /**\r\n     * Compute epsilon based on average distance between points\r\n     */\r\n    private computeEpsilon(points: number[][]): number {\r\n        if (points.length < 2) return 1.0;\r\n\r\n        let sumDist = 0;\r\n        let count = 0;\r\n\r\n        // Sample a subset for efficiency if there are many points\r\n        const sampleSize = Math.min(points.length, 100);\r\n        for (let i = 0; i < sampleSize; i++) {\r\n            for (let j = i + 1; j < sampleSize; j++) {\r\n                sumDist += this.euclideanDistance(points[i], points[j]);\r\n                count++;\r\n            }\r\n        }\r\n\r\n        return count > 0 ? sumDist / count : 1.0;\r\n    }\r\n\r\n    /**\r\n     * Euclidean distance between two points\r\n     */\r\n    private euclideanDistance(p1: number[], p2: number[]): number {\r\n        let sum = 0;\r\n        for (let i = 0; i < p1.length; i++) {\r\n            const diff = p1[i] - p2[i];\r\n            sum += diff * diff;\r\n        }\r\n        return Math.sqrt(sum);\r\n    }\r\n\r\n    /**\r\n     * Get the radial basis function based on the function name\r\n     */\r\n    private getRbfFunction(func: string): (x1: number[], x2: number[]) => number {\r\n        switch (func.toLowerCase()) {\r\n            case 'thin_plate':\r\n                return (x1: number[], x2: number[]) => {\r\n                    const r = this.euclideanDistance(x1, x2);\r\n                    if (r === 0) return 0;\r\n                    return r * r * Math.log(r);\r\n                };\r\n\r\n            case 'multiquadric':\r\n                return (x1: number[], x2: number[]) => {\r\n                    const r = this.euclideanDistance(x1, x2);\r\n                    return Math.sqrt(1 + (this.epsilon * r) ** 2);\r\n                };\r\n\r\n            case 'inverse_multiquadric':\r\n            case 'inverse':\r\n                return (x1: number[], x2: number[]) => {\r\n                    const r = this.euclideanDistance(x1, x2);\r\n                    return 1.0 / Math.sqrt(1 + (this.epsilon * r) ** 2);\r\n                };\r\n\r\n            case 'gaussian':\r\n                return (x1: number[], x2: number[]) => {\r\n                    const r = this.euclideanDistance(x1, x2);\r\n                    return Math.exp(-((this.epsilon * r) ** 2));\r\n                };\r\n\r\n            case 'linear':\r\n                return (x1: number[], x2: number[]) => {\r\n                    return this.euclideanDistance(x1, x2);\r\n                };\r\n\r\n            case 'squared':\r\n                return (x1: number[], x2: number[]) => {\r\n                    const r = this.euclideanDistance(x1, x2);\r\n                    return r ** 2;\r\n                };\r\n\r\n            // WARNING: removed cause of ambiguity with 'squared' (degenerated case)\r\n            // case 'cubic':\r\n            //     return (x1: number[], x2: number[]) => {\r\n            //         const r = this.euclideanDistance(x1, x2);\r\n            //         return r ** 3;\r\n            //     };\r\n\r\n            case 'quintic':\r\n                return (x1: number[], x2: number[]) => {\r\n                    const r = this.euclideanDistance(x1, x2);\r\n                    return r ** 5;\r\n                };\r\n\r\n            default:\r\n                throw new Error(`Unknown radial basis function: ${func}`);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Compute interpolation weights by solving the linear system\r\n     */\r\n    private computeWeights(): number[] {\r\n        const n = this.nodes.length;\r\n\r\n        // Build the interpolation matrix A\r\n        const A: number[][] = Array(n).fill(0).map(() => Array(n).fill(0));\r\n\r\n        for (let i = 0; i < n; i++) {\r\n            for (let j = 0; j < n; j++) {\r\n                A[i][j] = this.norm(this.nodes[i], this.nodes[j]);\r\n            }\r\n            // Add smoothing to diagonal\r\n            A[i][i] += this.smooth;\r\n        }\r\n\r\n        // Solve A * weights = values using Gaussian elimination\r\n        return this.solveLinearSystem(A, this.di);\r\n    }\r\n\r\n    /**\r\n     * Solve linear system Ax = b using Gaussian elimination with partial pivoting\r\n     */\r\n    private solveLinearSystem(A: number[][], b: number[]): number[] {\r\n        const n = A.length;\r\n\r\n        // Create augmented matrix [A|b]\r\n        const augmented: number[][] = A.map((row, i) => [...row, b[i]]);\r\n\r\n        // Forward elimination with partial pivoting\r\n        for (let col = 0; col < n; col++) {\r\n            // Find pivot\r\n            let maxRow = col;\r\n            for (let row = col + 1; row < n; row++) {\r\n                if (Math.abs(augmented[row][col]) > Math.abs(augmented[maxRow][col])) {\r\n                    maxRow = row;\r\n                }\r\n            }\r\n\r\n            // Swap rows\r\n            [augmented[col], augmented[maxRow]] = [augmented[maxRow], augmented[col]];\r\n\r\n            // Check for singular matrix\r\n            if (Math.abs(augmented[col][col]) < 1e-12) {\r\n                throw new Error('Matrix is singular or nearly singular');\r\n            }\r\n\r\n            // Eliminate column\r\n            for (let row = col + 1; row < n; row++) {\r\n                const factor = augmented[row][col] / augmented[col][col];\r\n                for (let j = col; j <= n; j++) {\r\n                    augmented[row][j] -= factor * augmented[col][j];\r\n                }\r\n            }\r\n        }\r\n\r\n        // Back substitution\r\n        const x: number[] = Array(n).fill(0);\r\n        for (let i = n - 1; i >= 0; i--) {\r\n            let sum = augmented[i][n];\r\n            for (let j = i + 1; j < n; j++) {\r\n                sum -= augmented[i][j] * x[j];\r\n            }\r\n            x[i] = sum / augmented[i][i];\r\n        }\r\n\r\n        return x;\r\n    }\r\n}\r\n","import './style.css';\r\nimport { RbfInterpolator } from './rbf_interpolator';\r\n\r\ninterface Point {\r\n    x: number;\r\n    y: number;\r\n    value: number;\r\n}\r\n\r\n// interface ColorMap {\r\n//     name: string;\r\n//     colors: [number, number, number][];\r\n// }\r\n\r\nclass RBFVisualizer {\r\n    private canvas: HTMLCanvasElement;\r\n    private ctx: CanvasRenderingContext2D;\r\n    private colorbarCanvas: HTMLCanvasElement;\r\n    private colorbarCtx: CanvasRenderingContext2D;\r\n\r\n    private points: Point[] = [];\r\n    private canvasWidth = 600;\r\n    private canvasHeight = 600;\r\n\r\n    private rbfFunction = 'thin_plate';\r\n    private gridResolution = 30;\r\n    private smoothing = 0.01;\r\n    private currentColorMap = 'turbo';\r\n    private showPoints = true;\r\n    private showContours = true;\r\n\r\n    private interpolator: RbfInterpolator | null = null;\r\n    private gridValues: number[][] = [];\r\n    private minValue = 0;\r\n    private maxValue = 1;\r\n\r\n    constructor() {\r\n        this.canvas = document.getElementById('visualization-canvas') as HTMLCanvasElement;\r\n        this.ctx = this.canvas.getContext('2d')!;\r\n        this.colorbarCanvas = document.getElementById('colorbar') as HTMLCanvasElement;\r\n        this.colorbarCtx = this.colorbarCanvas.getContext('2d')!;\r\n\r\n        this.setupCanvas();\r\n        this.setupEventListeners();\r\n        this.loadPreset('peaks');\r\n    }\r\n\r\n    private setupCanvas() {\r\n        this.canvas.width = this.canvasWidth;\r\n        this.canvas.height = this.canvasHeight;\r\n        this.colorbarCanvas.width = 400;\r\n        this.colorbarCanvas.height = 30;\r\n    }\r\n\r\n    private setupEventListeners() {\r\n        // Canvas click to add points\r\n        this.canvas.addEventListener('click', (e) => this.handleCanvasClick(e));\r\n\r\n        // Mouse move to show coordinates\r\n        this.canvas.addEventListener('mousemove', (e) => this.handleMouseMove(e));\r\n\r\n        // RBF function selector\r\n        const rbfSelect = document.getElementById('rbf-function') as HTMLSelectElement;\r\n        rbfSelect.addEventListener('change', (e) => {\r\n            this.rbfFunction = (e.target as HTMLSelectElement).value;\r\n            this.updateVisualization();\r\n        });\r\n\r\n        // Grid resolution slider\r\n        const gridSlider = document.getElementById('grid-resolution') as HTMLInputElement;\r\n        const gridValue = document.getElementById('grid-res-value')!;\r\n        gridSlider.addEventListener('input', (e) => {\r\n            this.gridResolution = parseInt((e.target as HTMLInputElement).value);\r\n            gridValue.textContent = `${this.gridResolution}x${this.gridResolution}`;\r\n            this.updateVisualization();\r\n        });\r\n\r\n        // Smoothing slider\r\n        const smoothSlider = document.getElementById('smoothing') as HTMLInputElement;\r\n        const smoothValue = document.getElementById('smooth-value')!;\r\n        smoothSlider.addEventListener('input', (e) => {\r\n            this.smoothing = parseFloat((e.target as HTMLInputElement).value);\r\n            smoothValue.textContent = this.smoothing.toFixed(2);\r\n            this.updateVisualization();\r\n        });\r\n\r\n        // Colormap selector\r\n        const colormapSelect = document.getElementById('colormap') as HTMLSelectElement;\r\n        colormapSelect.addEventListener('change', (e) => {\r\n            this.currentColorMap = (e.target as HTMLSelectElement).value;\r\n            this.draw();\r\n        });\r\n\r\n        // Show points checkbox\r\n        const showPointsCheck = document.getElementById('show-points') as HTMLInputElement;\r\n        showPointsCheck.addEventListener('change', (e) => {\r\n            this.showPoints = (e.target as HTMLInputElement).checked;\r\n            this.draw();\r\n        });\r\n\r\n        // Show contours checkbox\r\n        const showContoursCheck = document.getElementById('show-contours') as HTMLInputElement;\r\n        showContoursCheck.addEventListener('change', (e) => {\r\n            this.showContours = (e.target as HTMLInputElement).checked;\r\n            this.draw();\r\n        });\r\n\r\n        // Preset buttons\r\n        document.querySelectorAll('.preset-btn').forEach(btn => {\r\n            btn.addEventListener('click', (e) => {\r\n                const preset = (e.target as HTMLElement).dataset.preset!;\r\n                this.loadPreset(preset);\r\n            });\r\n        });\r\n\r\n        // Add point button\r\n        document.getElementById('add-point-btn')!.addEventListener('click', () => {\r\n            this.addRandomPoint();\r\n        });\r\n\r\n        // Clear points button\r\n        document.getElementById('clear-points-btn')!.addEventListener('click', () => {\r\n            this.clearPoints();\r\n        });\r\n\r\n        // Upload CSV button\r\n        document.getElementById('upload-csv-btn')!.addEventListener('click', () => {\r\n            document.getElementById('csv-file-input')!.click();\r\n        });\r\n\r\n        // File input change handler\r\n        document.getElementById('csv-file-input')!.addEventListener('change', (e) => {\r\n            const input = e.target as HTMLInputElement;\r\n            if (input.files && input.files[0]) {\r\n                this.loadCSVFile(input.files[0]);\r\n            }\r\n        });\r\n    }\r\n\r\n    private handleCanvasClick(e: MouseEvent) {\r\n        const rect = this.canvas.getBoundingClientRect();\r\n        const x = (e.clientX - rect.left) / this.canvasWidth;\r\n        const y = (e.clientY - rect.top) / this.canvasHeight;\r\n\r\n        // Random value between 0 and 1\r\n        const value = Math.random();\r\n\r\n        this.addPoint(x, y, value);\r\n    }\r\n\r\n    private handleMouseMove(e: MouseEvent) {\r\n        const rect = this.canvas.getBoundingClientRect();\r\n        const x = (e.clientX - rect.left) / this.canvasWidth;\r\n        const y = (e.clientY - rect.top) / this.canvasHeight;\r\n\r\n        let text = `x: ${x.toFixed(3)}, y: ${y.toFixed(3)}`;\r\n\r\n        // If we have interpolation, show the interpolated value\r\n        if (this.interpolator && x >= 0 && x <= 1 && y >= 0 && y <= 1) {\r\n            try {\r\n                const value = this.interpolator.interpolatePoint([x, y]);\r\n                text += ` | value: ${value.toFixed(3)}`;\r\n            } catch (e) {\r\n                // Ignore errors\r\n            }\r\n        }\r\n\r\n        document.getElementById('hover-coords')!.textContent = text;\r\n    }\r\n\r\n    private addPoint(x: number, y: number, value: number) {\r\n        this.points.push({ x, y, value });\r\n        this.updatePointsList();\r\n        this.updateVisualization();\r\n    }\r\n\r\n    private addRandomPoint() {\r\n        const x = Math.random();\r\n        const y = Math.random();\r\n        const value = Math.random();\r\n        this.addPoint(x, y, value);\r\n    }\r\n\r\n    private removePoint_(index: number) {\r\n        this.points.splice(index, 1);\r\n        this.updatePointsList();\r\n        this.updateVisualization();\r\n    }\r\n\r\n    private clearPoints() {\r\n        this.points = [];\r\n        this.updatePointsList();\r\n        this.updateVisualization();\r\n    }\r\n\r\n    private async loadCSVFile(file: File) {\r\n        try {\r\n            const text = await file.text();\r\n            //console.log(text)\r\n            this.parseAndLoadCSV(text);\r\n        } catch (error) {\r\n            console.error('Error loading CSV file:', error);\r\n            alert('Error loading CSV file. Please make sure it is a valid CSV file.');\r\n        }\r\n    }\r\n\r\n    private parseAndLoadCSV(csvText: string) {\r\n        const lines = csvText.trim().split('\\n');\r\n        \r\n        if (lines.length < 2) {\r\n            alert('CSV file must have at least a header row and one data row.');\r\n            return;\r\n        }\r\n\r\n        // Parse header\r\n        const header = lines[0].split(/[;,]/);\r\n        \r\n        // Try to find column indices for lat, lon, and value\r\n        // Support various common column names\r\n        const latIdx = header.findIndex(h => \r\n            /lat/i.test(h.trim()) || /y/i.test(h.trim())\r\n        );\r\n        const lonIdx = header.findIndex(h => \r\n            /lon/i.test(h.trim()) || /lng/i.test(h.trim()) || /x/i.test(h.trim())\r\n        );\r\n        const valIdx = header.findIndex(h => \r\n            /val/i.test(h.trim()) || /z/i.test(h.trim()) || /h2/i.test(h.trim()) || /ppm/i.test(h.trim())\r\n        );\r\n\r\n        if (latIdx === -1 || lonIdx === -1 || valIdx === -1) {\r\n            alert('Could not find latitude, longitude, and value columns.\\nExpected columns like: LATITUDE, LONGITUDE, VALUE (or X, Y, Z)');\r\n            return;\r\n        }\r\n\r\n        // Parse data rows\r\n        const newPoints: Point[] = [];\r\n        let minLat = Infinity, maxLat = -Infinity;\r\n        let minLon = Infinity, maxLon = -Infinity;\r\n        let minVal = Infinity, maxVal = -Infinity;\r\n\r\n        for (let i = 1; i < lines.length; i++) {\r\n            const line = lines[i].trim();\r\n            if (!line) continue;\r\n\r\n            const values = line.split(/[;,]/);\r\n            if (values.length <= Math.max(latIdx, lonIdx, valIdx)) continue;\r\n\r\n            const lat = parseFloat(values[latIdx]);\r\n            const lon = parseFloat(values[lonIdx]);\r\n            const val = parseFloat(values[valIdx]);\r\n\r\n            if (isNaN(lat) || isNaN(lon) || isNaN(val)) continue;\r\n\r\n            minLat = Math.min(minLat, lat);\r\n            maxLat = Math.max(maxLat, lat);\r\n            minLon = Math.min(minLon, lon);\r\n            maxLon = Math.max(maxLon, lon);\r\n            minVal = Math.min(minVal, val);\r\n            maxVal = Math.max(maxVal, val);\r\n\r\n            newPoints.push({ \r\n                x: lon, \r\n                y: lat, \r\n                value: val \r\n            });\r\n        }\r\n\r\n        if (newPoints.length === 0) {\r\n            alert('No valid data points found in CSV file.');\r\n            return;\r\n        }\r\n\r\n        // Normalize coordinates to [0, 1] range\r\n        this.points = newPoints.map(p => ({\r\n            x: (p.x - minLon) / (maxLon - minLon),\r\n            y: (p.y - minLat) / (maxLat - minLat),\r\n            value: (p.value - minVal) / (maxVal - minVal)\r\n        }));\r\n\r\n        console.log(`Loaded ${this.points.length} points from CSV`);\r\n        console.log(`Lat range: ${minLat} to ${maxLat}`);\r\n        console.log(`Lon range: ${minLon} to ${maxLon}`);\r\n        console.log(`Value range: ${minVal} to ${maxVal}`);\r\n\r\n        this.updatePointsList();\r\n        this.updateVisualization();\r\n    }\r\n\r\n    private updatePointsList() {\r\n        const list = document.getElementById('points-list')!;\r\n        const count = document.getElementById('point-count')!;\r\n\r\n        count.textContent = this.points.length.toString();\r\n\r\n        if (this.points.length === 0) {\r\n            list.innerHTML = '<p style=\"color: #6c757d; font-size: 0.85rem;\">No points yet. Click on canvas to add.</p>';\r\n            return;\r\n        }\r\n\r\n        list.innerHTML = this.points.map((p, i) => `\r\n      <div class=\"point-item\">\r\n        <span>P${i + 1}: (${p.x.toFixed(2)}, ${p.y.toFixed(2)}) = ${p.value.toFixed(2)}</span>\r\n        <button onclick=\"window.visualizer.removePoint(${i})\">Ã—</button>\r\n      </div>\r\n    `).join('');\r\n    }\r\n\r\n    private async loadPreset(preset: string) {\r\n        this.points = [];\r\n\r\n        switch (preset) {\r\n            case 'h2_frantz':\r\n                // Load the H2 Frantz CSV data\r\n                try {\r\n                    const response = await fetch('/h2_frantz.csv');\r\n                    const csvText = await response.text();\r\n                    this.parseAndLoadCSV(csvText);\r\n                    return; // parseAndLoadCSV handles update\r\n                } catch (error) {\r\n                    console.error('Error loading H2 Frantz data:', error);\r\n                    alert('Could not load H2 Frantz data file.');\r\n                    return;\r\n                }\r\n\r\n            case 'peaks':\r\n                // Matlab peaks-like function\r\n                for (let i = 0; i < 25; i++) {\r\n                    const x = Math.random();\r\n                    const y = Math.random();\r\n                    const value = this.peaksFunction(x * 6 - 3, y * 6 - 3);\r\n                    this.points.push({ x, y, value: (value + 6) / 12 });\r\n                }\r\n                break;\r\n\r\n            case 'ripple':\r\n                // Ripple pattern\r\n                for (let i = 0; i < 20; i++) {\r\n                    const x = Math.random();\r\n                    const y = Math.random();\r\n                    const value = Math.sin(x * Math.PI * 4) * Math.cos(y * Math.PI * 4);\r\n                    this.points.push({ x, y, value: (value + 1) / 2 });\r\n                }\r\n                break;\r\n\r\n            case 'random':\r\n                // Random points\r\n                for (let i = 0; i < 15; i++) {\r\n                    this.points.push({\r\n                        x: Math.random(),\r\n                        y: Math.random(),\r\n                        value: Math.random()\r\n                    });\r\n                }\r\n                break;\r\n\r\n            case 'gradient':\r\n                // Simple gradient\r\n                this.points = [\r\n                    { x: 0, y: 0, value: 0 },\r\n                    { x: 1, y: 0, value: 0.5 },\r\n                    { x: 0, y: 1, value: 0.5 },\r\n                    { x: 1, y: 1, value: 1 },\r\n                    { x: 0.5, y: 0.5, value: 0.5 }\r\n                ];\r\n                break;\r\n\r\n            case 'saddle':\r\n                // Saddle point\r\n                for (let i = 0; i < 20; i++) {\r\n                    const x = Math.random();\r\n                    const y = Math.random();\r\n                    const cx = x - 0.5;\r\n                    const cy = y - 0.5;\r\n                    const value = cx * cx - cy * cy;\r\n                    this.points.push({ x, y, value: (value + 0.5) });\r\n                }\r\n                break;\r\n        }\r\n\r\n        this.updatePointsList();\r\n        this.updateVisualization();\r\n    }\r\n\r\n    private peaksFunction(x: number, y: number): number {\r\n        return 3 * (1 - x) ** 2 * Math.exp(-(x ** 2) - (y + 1) ** 2)\r\n            - 10 * (x / 5 - x ** 3 - y ** 5) * Math.exp(-(x ** 2) - y ** 2)\r\n            - 1 / 3 * Math.exp(-((x + 1) ** 2) - y ** 2);\r\n    }\r\n\r\n    private updateVisualization() {\r\n        if (this.points.length < 3) {\r\n            this.ctx.clearRect(0, 0, this.canvasWidth, this.canvasHeight);\r\n            this.ctx.fillStyle = '#f8f9fa';\r\n            this.ctx.fillRect(0, 0, this.canvasWidth, this.canvasHeight);\r\n            this.ctx.fillStyle = '#6c757d';\r\n            this.ctx.font = '16px sans-serif';\r\n            this.ctx.textAlign = 'center';\r\n            this.ctx.fillText('Add at least 3 points to see interpolation', this.canvasWidth / 2, this.canvasHeight / 2);\r\n\r\n            if (this.showPoints) {\r\n                this.drawPoints();\r\n            }\r\n\r\n            return;\r\n        }\r\n\r\n        const startTime = performance.now();\r\n\r\n        try {\r\n            // Prepare data for interpolation\r\n            const trainingPoints = this.points.map(p => [p.x, p.y]);\r\n            const trainingValues = this.points.map(p => p.value);\r\n\r\n            // Create interpolator\r\n            this.interpolator = new RbfInterpolator(\r\n                trainingPoints,\r\n                trainingValues,\r\n                this.rbfFunction,\r\n                this.smoothing\r\n            );\r\n\r\n            // Generate grid\r\n            this.generateGrid();\r\n\r\n            const endTime = performance.now();\r\n            document.getElementById('interp-time')!.textContent = `${(endTime - startTime).toFixed(1)}ms`;\r\n\r\n            // Draw\r\n            this.draw();\r\n\r\n        } catch (error) {\r\n            console.error('Interpolation error:', error);\r\n            this.ctx.clearRect(0, 0, this.canvasWidth, this.canvasHeight);\r\n            this.ctx.fillStyle = '#dc3545';\r\n            this.ctx.font = '14px sans-serif';\r\n            this.ctx.textAlign = 'center';\r\n            this.ctx.fillText('Error during interpolation', this.canvasWidth / 2, this.canvasHeight / 2);\r\n        }\r\n    }\r\n\r\n    private generateGrid() {\r\n        this.gridValues = [];\r\n        const step = 1 / (this.gridResolution - 1);\r\n\r\n        this.minValue = Infinity;\r\n        this.maxValue = -Infinity;\r\n\r\n        for (let i = 0; i < this.gridResolution; i++) {\r\n            const row: number[] = [];\r\n            for (let j = 0; j < this.gridResolution; j++) {\r\n                const x = i * step;\r\n                const y = j * step;\r\n                const value = this.interpolator!.interpolatePoint([x, y]);\r\n                row.push(value);\r\n\r\n                this.minValue = Math.min(this.minValue, value);\r\n                this.maxValue = Math.max(this.maxValue, value);\r\n            }\r\n            this.gridValues.push(row);\r\n        }\r\n\r\n        // Update colorbar labels\r\n        document.getElementById('colorbar-min')!.textContent = this.minValue.toFixed(2);\r\n        document.getElementById('colorbar-max')!.textContent = this.maxValue.toFixed(2);\r\n    }\r\n\r\n    private draw() {\r\n        if (this.gridValues.length === 0) return;\r\n\r\n        this.ctx.clearRect(0, 0, this.canvasWidth, this.canvasHeight);\r\n\r\n        // Draw interpolated surface\r\n        this.drawSurface();\r\n\r\n        // Draw contours if enabled\r\n        if (this.showContours) {\r\n            this.drawContours();\r\n        }\r\n\r\n        // Draw training points if enabled\r\n        if (this.showPoints) {\r\n            this.drawPoints();\r\n        }\r\n\r\n        // Draw colorbar\r\n        this.drawColorbar();\r\n    }\r\n\r\n    private drawSurface() {\r\n        const cellWidth = this.canvasWidth / (this.gridResolution - 1);\r\n        const cellHeight = this.canvasHeight / (this.gridResolution - 1);\r\n\r\n        for (let i = 0; i < this.gridResolution - 1; i++) {\r\n            for (let j = 0; j < this.gridResolution - 1; j++) {\r\n                const value = this.gridValues[i][j];\r\n                const normalized = (value - this.minValue) / (this.maxValue - this.minValue);\r\n                const color = this.getColor(normalized);\r\n\r\n                this.ctx.fillStyle = `rgb(${color[0]}, ${color[1]}, ${color[2]})`;\r\n                this.ctx.fillRect(\r\n                    i * cellWidth,\r\n                    j * cellHeight,\r\n                    cellWidth + 1,\r\n                    cellHeight + 1\r\n                );\r\n            }\r\n        }\r\n    }\r\n\r\n    private drawContours() {\r\n        const numContours = 10;\r\n        const step = (this.maxValue - this.minValue) / numContours;\r\n\r\n        this.ctx.strokeStyle = 'rgba(0, 0, 0, 0.3)';\r\n        this.ctx.lineWidth = 1;\r\n\r\n        for (let k = 0; k <= numContours; k++) {\r\n            const level = this.minValue + k * step;\r\n            this.drawContourLevel(level);\r\n        }\r\n    }\r\n\r\n    private drawContourLevel(level: number) {\r\n        const cellWidth = this.canvasWidth / (this.gridResolution - 1);\r\n        const cellHeight = this.canvasHeight / (this.gridResolution - 1);\r\n\r\n        // Simple marching squares approximation\r\n        for (let i = 0; i < this.gridResolution - 1; i++) {\r\n            for (let j = 0; j < this.gridResolution - 1; j++) {\r\n                const v00 = this.gridValues[i][j];\r\n                const v10 = this.gridValues[i + 1][j];\r\n                const v01 = this.gridValues[i][j + 1];\r\n                const v11 = this.gridValues[i + 1][j + 1];\r\n\r\n                const x = i * cellWidth;\r\n                const y = j * cellHeight;\r\n\r\n                // Check if contour passes through this cell\r\n                if ((v00 <= level && level <= v11) || (v00 >= level && level >= v11) ||\r\n                    (v10 <= level && level <= v01) || (v10 >= level && level >= v01)) {\r\n\r\n                    // Draw a simple cross-cell line if values cross the level\r\n                    if ((v00 < level && v11 > level) || (v00 > level && v11 < level)) {\r\n                        this.ctx.beginPath();\r\n                        this.ctx.moveTo(x, y + cellHeight);\r\n                        this.ctx.lineTo(x + cellWidth, y);\r\n                        this.ctx.stroke();\r\n                    }\r\n                    if ((v10 < level && v01 > level) || (v10 > level && v01 < level)) {\r\n                        this.ctx.beginPath();\r\n                        this.ctx.moveTo(x, y);\r\n                        this.ctx.lineTo(x + cellWidth, y + cellHeight);\r\n                        this.ctx.stroke();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private drawPoints() {\r\n        this.points.forEach((point, _index) => {\r\n            const x = point.x * this.canvasWidth;\r\n            const y = point.y * this.canvasHeight;\r\n\r\n            // Draw point\r\n            this.ctx.beginPath();\r\n            this.ctx.arc(x, y, 6, 0, 2 * Math.PI);\r\n            this.ctx.fillStyle = 'white';\r\n            this.ctx.fill();\r\n            this.ctx.strokeStyle = '#333';\r\n            this.ctx.lineWidth = 2;\r\n            this.ctx.stroke();\r\n\r\n            // Draw value as text\r\n            this.ctx.fillStyle = '#333';\r\n            this.ctx.font = 'bold 11px sans-serif';\r\n            this.ctx.textAlign = 'center';\r\n            this.ctx.fillText(point.value.toFixed(2), x, y - 10);\r\n        });\r\n    }\r\n\r\n    private drawColorbar() {\r\n        const width = this.colorbarCanvas.width;\r\n        const height = this.colorbarCanvas.height;\r\n\r\n        for (let i = 0; i < width; i++) {\r\n            const normalized = i / width;\r\n            const color = this.getColor(normalized);\r\n\r\n            this.colorbarCtx.fillStyle = `rgb(${color[0]}, ${color[1]}, ${color[2]})`;\r\n            this.colorbarCtx.fillRect(i, 0, 1, height);\r\n        }\r\n    }\r\n\r\n    private getColor(t: number): [number, number, number] {\r\n        // Clamp t to [0, 1]\r\n        t = Math.max(0, Math.min(1, t));\r\n\r\n        const colormaps: { [key: string]: (t: number) => [number, number, number] } = {\r\n            viridis: (t) => {\r\n                const r = 255 * (0.267 + 0.867 * t - 1.333 * t ** 2 + 0.491 * t ** 3);\r\n                const g = 255 * (0.005 + 1.429 * t - 0.972 * t ** 2 + 0.282 * t ** 3);\r\n                const b = 255 * (0.329 + 1.074 * t - 3.185 * t ** 2 + 2.479 * t ** 3);\r\n                return [Math.round(r), Math.round(g), Math.round(b)];\r\n            },\r\n            plasma: (t) => {\r\n                const r = 255 * (0.050 + 2.258 * t - 2.385 * t ** 2 + 0.811 * t ** 3);\r\n                const g = 255 * (0.020 + 0.170 * t + 2.490 * t ** 2 - 2.155 * t ** 3);\r\n                const b = 255 * (0.527 + 2.666 * t - 6.364 * t ** 2 + 3.797 * t ** 3);\r\n                return [Math.round(r), Math.round(g), Math.round(b)];\r\n            },\r\n            turbo: (t) => {\r\n                const r = 255 * Math.sin(Math.PI * (t * 0.75 + 0.67));\r\n                const g = 255 * Math.sin(Math.PI * (t * 0.75 + 0.25));\r\n                const b = 255 * Math.sin(Math.PI * (t * 0.75 - 0.17));\r\n                return [Math.round(Math.max(0, r)), Math.round(Math.max(0, g)), Math.round(Math.max(0, b))];\r\n            },\r\n            coolwarm: (t) => {\r\n                const r = 255 * (0.23 + 1.54 * t - 1.54 * t ** 2 + 0.77 * t ** 3);\r\n                const g = 255 * (0.3 + 1.53 * t - 3.06 * t ** 2 + 1.23 * t ** 3);\r\n                const b = 255 * (0.75 - 1.5 * t + 1.5 * t ** 2 - 0.75 * t ** 3);\r\n                return [Math.round(r), Math.round(g), Math.round(b)];\r\n            },\r\n            rainbow: (t) => {\r\n                const r = 255 * Math.sin(Math.PI * t);\r\n                const g = 255 * Math.sin(Math.PI * (t + 0.33));\r\n                const b = 255 * Math.sin(Math.PI * (t + 0.67));\r\n                return [Math.round(Math.max(0, r)), Math.round(Math.max(0, g)), Math.round(Math.max(0, b))];\r\n            }\r\n        };\r\n\r\n        const colormap = colormaps[this.currentColorMap] || colormaps.turbo;\r\n        return colormap(t);\r\n    }\r\n\r\n    // Public method to remove point (called from HTML)\r\n    public removePoint(index: number) {\r\n        this.removePoint_(index);\r\n    }\r\n}\r\n\r\n// Initialize the application\r\nconst visualizer = new RBFVisualizer();\r\n\r\n// Make it globally accessible for HTML onclick\r\n(window as any).visualizer = visualizer;"],"names":["RbfInterpolator","points","values","func","smooth","epsilon","__publicField","p","point","result","i","sumDist","count","sampleSize","j","p1","p2","sum","diff","x1","x2","r","n","A","b","augmented","row","col","maxRow","factor","x","RBFVisualizer","e","gridSlider","gridValue","smoothSlider","smoothValue","btn","preset","input","rect","y","value","text","index","file","error","csvText","lines","header","latIdx","h","lonIdx","valIdx","newPoints","minLat","maxLat","minLon","maxLon","minVal","maxVal","line","lat","lon","val","list","cx","cy","startTime","trainingPoints","trainingValues","endTime","step","cellWidth","cellHeight","normalized","color","k","level","v00","v10","v01","v11","_index","width","height","t","colormaps","g","visualizer"],"mappings":"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"}